---
title: 钉钉机器人自动推送
date: 2017-11-11 19:37:00
categories: 智能
tags:
- 钉钉
- php
---
[课表管理系统](https://github.com/yunzhiclub/courseManageSystem)，是我们用`php`开发的第一个`web`项目，虽然功能实现上没有太大的问题，但是代码的规范性还是不敢恭维。这个项目或许就这样永远停留在`Github`中，就这样，不去修改，这会警示着我们代码的整洁。

该项目已经上线，在不考虑代码规范性的前提下，系统的功能还是没有问题的。

![](/images/2017/11/11/ding-auto-bot/0.png)

这是显示的首页，每节课我们都需要去亲自登录系统去查看每个人的课程状态，过于麻烦。

正好，钉钉群中每天为我们推送消息的`Github`机器人给了我们灵感，我们可不可以自定义一个自动推送消息的机器人放在钉钉中呢？

<!-- more -->

# Demo

## 原理

钉钉的开放平台写的很详细，[钉钉|开放平台](https://open-doc.dingtalk.com/docs/doc.htm?spm=a219a.7629140.0.0.zZIvnt&treeId=257&articleId=105735&docType=1)

读一遍官方的`Demo`，感觉对整个流程有一个非常清晰的认识。

![](/images/2017/11/11/ding-auto-bot/1.png)

每个绑定到钉钉群的机器人都有一个`"Hook"`地址，其实就是我们每天都能见到的`url`，我们在这个地址上`post`指定格式的数据，就能让该机器人在钉钉群中发消息。

## 思路

在钉钉群中建立群机器人，获取`"Hook"`地址。

建立相应控制器，相应方法，该方法负责完成一系列获取数据、且向相应`"Hook"`地址`post`数据的操作。

建立脚本，该脚本访问映射到我们上文方法的特定`url`。

设置定时任务，定时执行该脚本，完成自动推送。